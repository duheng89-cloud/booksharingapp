<<<<<<< HEAD
# å›¾ä¹¦å…±äº«ç¤¾åŒº - é¡¹ç›®è¯´æ˜æ–‡æ¡£

## ğŸ“š é¡¹ç›®ç®€ä»‹

å›¾ä¹¦å…±äº«ç¤¾åŒºæ˜¯ä¸€ä¸ªåŸºäº Laravel æ¡†æ¶å¼€å‘çš„åœ¨çº¿å¹³å°ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ­¤æ³¨å†Œã€ç™»å½•ã€åˆ†äº«å›¾ä¹¦ã€æµè§ˆä»–äººåˆ†äº«çš„å›¾ä¹¦ä»¥åŠæäº¤å€Ÿé˜…è¯·æ±‚ã€‚ç®¡ç†å‘˜èƒ½å¤Ÿç®¡ç†ç”¨æˆ·ã€å®¡æ ¸å›¾ä¹¦ä»¥åŠå¤„ç†å€Ÿé˜…è¯·æ±‚ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Laravel 12.39.0
- **æ•°æ®åº“**: MySQL
- **ORM**: Eloquent ORM
- **å‰ç«¯æ ·å¼**: Tailwind CSS (CDN)
- **PHPç‰ˆæœ¬**: PHP 8.4.0

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- âœ… æµè§ˆå›¾ä¹¦åˆ—è¡¨ï¼ˆæœªç™»å½•ä¹Ÿå¯è®¿é—®ï¼‰
- âœ… æŸ¥çœ‹å›¾ä¹¦è¯¦æƒ…ï¼ˆæœªç™»å½•ä¹Ÿå¯è®¿é—®ï¼‰
- âœ… åˆ†äº«å›¾ä¹¦ï¼ˆéœ€è¦ç™»å½•ï¼‰
- âœ… ç¼–è¾‘å’Œåˆ é™¤è‡ªå·±åˆ†äº«çš„å›¾ä¹¦ï¼ˆéœ€è¦ç™»å½•ï¼‰
- âœ… ç”³è¯·å€Ÿé˜…å›¾ä¹¦ï¼ˆéœ€è¦ç™»å½•ï¼‰
- âœ… æŸ¥çœ‹å€Ÿé˜…è¯·æ±‚ï¼ˆæˆ‘æäº¤çš„/æˆ‘æ”¶åˆ°çš„ï¼‰

### ç®¡ç†å‘˜åŠŸèƒ½
- âœ… ç®¡ç†å‘˜ä»ªè¡¨æ¿ï¼ˆç»Ÿè®¡ä¿¡æ¯ï¼‰
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆæŸ¥çœ‹ã€ä¿®æ”¹ç”¨æˆ·è§’è‰²ï¼‰
- âœ… å›¾ä¹¦å®¡æ ¸ï¼ˆé€šè¿‡/æ‹’ç»å¾…å®¡æ ¸çš„å›¾ä¹¦ï¼‰
- âœ… å€Ÿé˜…è¯·æ±‚ç®¡ç†ï¼ˆæŸ¥çœ‹æ‰€æœ‰å€Ÿé˜…è¯·æ±‚ï¼‰
- âœ… å¤„ç†å€Ÿé˜…è¯·æ±‚ï¼ˆåŒæ„/æ‹’ç»ï¼‰

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
bookSharingCommunity/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â””â”€â”€ Controllers/
â”‚   â”‚       â”œâ”€â”€ AdminController.php      # ç®¡ç†å‘˜æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ AuthController.php       # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ BookController.php       # å›¾ä¹¦æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ BorrowRequestController.php  # å€Ÿé˜…è¯·æ±‚æ§åˆ¶å™¨
â”‚   â”‚       â””â”€â”€ Controller.php          # åŸºç¡€æ§åˆ¶å™¨
â”‚   â””â”€â”€ Models/
â”‚       â”œâ”€â”€ Book.php                     # å›¾ä¹¦æ¨¡å‹
â”‚       â”œâ”€â”€ BorrowRequest.php            # å€Ÿé˜…è¯·æ±‚æ¨¡å‹
â”‚       â””â”€â”€ User.php                     # ç”¨æˆ·æ¨¡å‹
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/                      # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 2025_11_25_091600_create_users_table.php
â”‚   â”‚   â”œâ”€â”€ 2025_11_25_091633_create_books_table.php
â”‚   â”‚   â””â”€â”€ 2025_11_25_091644_create_borrow_requests_table.php
â”‚   â””â”€â”€ seeders/                         # æ•°æ®åº“ç§å­æ–‡ä»¶
â”‚       â”œâ”€â”€ DatabaseSeeder.php
â”‚       â”œâ”€â”€ UserSeeder.php
â”‚       â””â”€â”€ BookSeeder.php
â”œâ”€â”€ resources/
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ layouts/
â”‚       â”‚   â””â”€â”€ app.blade.php            # ä¸»å¸ƒå±€æ–‡ä»¶
â”‚       â”œâ”€â”€ auth/                        # è®¤è¯ç›¸å…³è§†å›¾
â”‚       â”‚   â”œâ”€â”€ login.blade.php
â”‚       â”‚   â””â”€â”€ register.blade.php
â”‚       â”œâ”€â”€ books/                       # å›¾ä¹¦ç›¸å…³è§†å›¾
â”‚       â”‚   â”œâ”€â”€ index.blade.php
â”‚       â”‚   â”œâ”€â”€ create.blade.php
â”‚       â”‚   â”œâ”€â”€ show.blade.php
â”‚       â”‚   â””â”€â”€ edit.blade.php
â”‚       â”œâ”€â”€ borrow-requests/            # å€Ÿé˜…è¯·æ±‚ç›¸å…³è§†å›¾
â”‚       â”‚   â”œâ”€â”€ index.blade.php
â”‚       â”‚   â”œâ”€â”€ create.blade.php
â”‚       â”‚   â””â”€â”€ show.blade.php
â”‚       â””â”€â”€ admin/                       # ç®¡ç†å‘˜ç›¸å…³è§†å›¾
â”‚           â”œâ”€â”€ dashboard.blade.php
â”‚           â”œâ”€â”€ users.blade.php
â”‚           â”œâ”€â”€ pending-books.blade.php
â”‚           â””â”€â”€ borrow-requests.blade.php
â””â”€â”€ routes/
    â””â”€â”€ web.php                          # Web è·¯ç”±æ–‡ä»¶
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### 1. users è¡¨ï¼ˆç”¨æˆ·è¡¨ï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | bigint | ä¸»é”®ï¼Œç”¨æˆ·ID |
| name | string | ç”¨æˆ·å§“å |
| email | string | ç”¨æˆ·é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| email_verified_at | timestamp | é‚®ç®±éªŒè¯æ—¶é—´ |
| password | string | ç”¨æˆ·å¯†ç ï¼ˆåŠ å¯†ï¼‰ |
| role | enum | ç”¨æˆ·è§’è‰²ï¼šuserï¼ˆæ™®é€šç”¨æˆ·ï¼‰ã€adminï¼ˆç®¡ç†å‘˜ï¼‰ |
| remember_token | string | è®°ä½æˆ‘åŠŸèƒ½çš„ä»¤ç‰Œ |
| created_at | timestamp | åˆ›å»ºæ—¶é—´ |
| updated_at | timestamp | æ›´æ–°æ—¶é—´ |

### 2. books è¡¨ï¼ˆå›¾ä¹¦è¡¨ï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | bigint | ä¸»é”®ï¼Œå›¾ä¹¦ID |
| user_id | bigint | å›¾ä¹¦æ‰€æœ‰è€…IDï¼ˆå…³è”usersè¡¨ï¼‰ |
| title | string | å›¾ä¹¦æ ‡é¢˜ |
| author | string | å›¾ä¹¦ä½œè€… |
| isbn | string | ISBNå·ï¼ˆå¯é€‰ï¼Œå”¯ä¸€ï¼‰ |
| description | text | å›¾ä¹¦æè¿°ï¼ˆå¯é€‰ï¼‰ |
| cover_image | string | å›¾ä¹¦å°é¢å›¾ç‰‡è·¯å¾„ï¼ˆå¯é€‰ï¼‰ |
| status | enum | å®¡æ ¸çŠ¶æ€ï¼špendingï¼ˆå¾…å®¡æ ¸ï¼‰ã€approvedï¼ˆå·²é€šè¿‡ï¼‰ã€rejectedï¼ˆå·²æ‹’ç»ï¼‰ |
| is_available | boolean | æ˜¯å¦å¯å€Ÿé˜… |
| created_at | timestamp | åˆ›å»ºæ—¶é—´ |
| updated_at | timestamp | æ›´æ–°æ—¶é—´ |

### 3. borrow_requests è¡¨ï¼ˆå€Ÿé˜…è¯·æ±‚è¡¨ï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | bigint | ä¸»é”®ï¼Œå€Ÿé˜…è¯·æ±‚ID |
| book_id | bigint | å›¾ä¹¦IDï¼ˆå…³è”booksè¡¨ï¼‰ |
| borrower_id | bigint | å€Ÿé˜…è€…IDï¼ˆå…³è”usersè¡¨ï¼‰ |
| owner_id | bigint | å›¾ä¹¦æ‰€æœ‰è€…IDï¼ˆå…³è”usersè¡¨ï¼‰ |
| status | enum | è¯·æ±‚çŠ¶æ€ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€approvedï¼ˆå·²åŒæ„ï¼‰ã€rejectedï¼ˆå·²æ‹’ç»ï¼‰ã€returnedï¼ˆå·²å½’è¿˜ï¼‰ |
| request_message | text | å€Ÿé˜…ç•™è¨€ï¼ˆå¯é€‰ï¼‰ |
| borrow_date | date | å€Ÿé˜…æ—¥æœŸï¼ˆå¯é€‰ï¼‰ |
| return_date | date | å½’è¿˜æ—¥æœŸï¼ˆå¯é€‰ï¼‰ |
| created_at | timestamp | åˆ›å»ºæ—¶é—´ |
| updated_at | timestamp | æ›´æ–°æ—¶é—´ |

## ğŸ” è®¤è¯å’Œæˆæƒ

### è®¤è¯ï¼ˆAuthenticationï¼‰

é¡¹ç›®ä½¿ç”¨ Laravel å†…ç½®çš„è®¤è¯ç³»ç»Ÿï¼š

1. **ç”¨æˆ·æ³¨å†Œ** (`AuthController@register`)
   - éªŒè¯ç”¨æˆ·è¾“å…¥ï¼ˆå§“åã€é‚®ç®±ã€å¯†ç ï¼‰
   - å¯†ç è‡ªåŠ¨å“ˆå¸ŒåŠ å¯†
   - æ–°ç”¨æˆ·é»˜è®¤è§’è‰²ä¸º `user`
   - æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•

2. **ç”¨æˆ·ç™»å½•** (`AuthController@login`)
   - éªŒè¯é‚®ç®±å’Œå¯†ç 
   - æ”¯æŒ"è®°ä½æˆ‘"åŠŸèƒ½
   - ç™»å½•æˆåŠŸåæ ¹æ®è§’è‰²é‡å®šå‘

3. **ç”¨æˆ·ç™»å‡º** (`AuthController@logout`)
   - æ¸…é™¤ç”¨æˆ·ä¼šè¯
   - ä½¿ä¼šè¯ä»¤ç‰Œæ— æ•ˆ

### æˆæƒï¼ˆAuthorizationï¼‰

é¡¹ç›®å®ç°äº†åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼š

1. **è§’è‰²å®šä¹‰**
   - `user`: æ™®é€šç”¨æˆ·
   - `admin`: ç®¡ç†å‘˜

2. **æƒé™æ§åˆ¶**

   **å…¬å¼€è®¿é—®ï¼ˆæ— éœ€ç™»å½•ï¼‰ï¼š**
   - æµè§ˆå›¾ä¹¦åˆ—è¡¨
   - æŸ¥çœ‹å›¾ä¹¦è¯¦æƒ…

   **éœ€è¦ç™»å½•ï¼š**
   - åˆ†äº«å›¾ä¹¦
   - ç¼–è¾‘/åˆ é™¤è‡ªå·±çš„å›¾ä¹¦
   - ç”³è¯·å€Ÿé˜…
   - æŸ¥çœ‹å€Ÿé˜…è¯·æ±‚

   **ä»…ç®¡ç†å‘˜ï¼š**
   - è®¿é—®ç®¡ç†å‘˜ä»ªè¡¨æ¿
   - ç®¡ç†ç”¨æˆ·ï¼ˆä¿®æ”¹è§’è‰²ï¼‰
   - å®¡æ ¸å›¾ä¹¦
   - ç®¡ç†æ‰€æœ‰å€Ÿé˜…è¯·æ±‚

3. **æˆæƒå®ç°æ–¹å¼**

   **ä¸­é—´ä»¶ä¿æŠ¤ï¼š**
   ```php
   Route::middleware('auth')->group(function () {
       // éœ€è¦ç™»å½•çš„è·¯ç”±
   });
   ```

   **æ§åˆ¶å™¨å†…æƒé™æ£€æŸ¥ï¼š**
   ```php
   // æ£€æŸ¥æ˜¯å¦æ˜¯ç®¡ç†å‘˜
   if (!Auth::user()->isAdmin()) {
       abort(403, 'æ— æƒè®¿é—®');
   }
   
   // æ£€æŸ¥æ˜¯å¦æ˜¯èµ„æºæ‰€æœ‰è€…
   if ($book->user_id !== Auth::id()) {
       abort(403, 'æ— æƒæ“ä½œ');
   }
   ```

   **è§†å›¾å†…æƒé™åˆ¤æ–­ï¼š**
   ```blade
   @auth
       @if(auth()->user()->isAdmin())
           <!-- ç®¡ç†å‘˜å†…å®¹ -->
       @endif
   @endauth
   ```

## âœ… æ•°æ®éªŒè¯

é¡¹ç›®ä½¿ç”¨ **Form Request ç±»**æ¥é›†ä¸­ç®¡ç†éªŒè¯è§„åˆ™ï¼Œè¿™æ˜¯ Laravel çš„æœ€ä½³å®è·µã€‚æ‰€æœ‰éªŒè¯è§„åˆ™éƒ½å®šä¹‰åœ¨ `app/Http/Requests/` ç›®å½•ä¸‹çš„ Form Request ç±»ä¸­ã€‚

### éªŒè¯å®ç°æ–¹å¼

é¡¹ç›®é‡‡ç”¨äº† **ä¸‰å±‚éªŒè¯æœºåˆ¶**ï¼š

1. **Form Request ç±»éªŒè¯**ï¼ˆä¸»è¦éªŒè¯æ–¹å¼ï¼‰
   - é›†ä¸­ç®¡ç†éªŒè¯è§„åˆ™
   - åŒ…å«æˆæƒæ£€æŸ¥ï¼ˆauthorize æ–¹æ³•ï¼‰
   - å¯è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
   - å¯æ·»åŠ è‡ªå®šä¹‰éªŒè¯é€»è¾‘

2. **æ¨¡å‹å±‚ä¿æŠ¤**
   - ä½¿ç”¨ `$fillable` é™åˆ¶å¯æ‰¹é‡èµ‹å€¼çš„å­—æ®µ
   - ä½¿ç”¨ `$hidden` éšè—æ•æ„Ÿä¿¡æ¯
   - ä½¿ç”¨ç±»å‹è½¬æ¢ï¼ˆcastsï¼‰ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®

3. **å‰ç«¯éªŒè¯**
   - HTML5 è¡¨å•éªŒè¯ï¼ˆrequired, minlength ç­‰ï¼‰
   - æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

### Form Request ç±»åˆ—è¡¨

é¡¹ç›®åˆ›å»ºäº†ä»¥ä¸‹ Form Request ç±»ï¼š

#### 1. RegisterRequest - ç”¨æˆ·æ³¨å†ŒéªŒè¯

**æ–‡ä»¶ä½ç½®**: `app/Http/Requests/RegisterRequest.php`

**éªŒè¯è§„åˆ™ï¼š**
```php
public function rules(): array
{
    return [
        'name' => 'required|string|max:255',
        'email' => 'required|string|email|max:255|unique:users',
        'password' => 'required|string|min:8|confirmed',
    ];
}
```

**æˆæƒæ£€æŸ¥ï¼š**
```php
public function authorize(): bool
{
    return true; // æ‰€æœ‰äººéƒ½å¯ä»¥æ³¨å†Œ
}
```

**è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼š**
- æä¾›äº†ä¸­æ–‡é”™è¯¯æç¤º
- é’ˆå¯¹æ¯ä¸ªå­—æ®µéƒ½æœ‰å‹å¥½çš„é”™è¯¯ä¿¡æ¯

#### 2. LoginRequest - ç”¨æˆ·ç™»å½•éªŒè¯

**æ–‡ä»¶ä½ç½®**: `app/Http/Requests/LoginRequest.php`

**éªŒè¯è§„åˆ™ï¼š**
```php
public function rules(): array
{
    return [
        'email' => 'required|email',
        'password' => 'required',
    ];
}
```

#### 3. StoreBookRequest - åˆ›å»ºå›¾ä¹¦éªŒè¯

**æ–‡ä»¶ä½ç½®**: `app/Http/Requests/StoreBookRequest.php`

**éªŒè¯è§„åˆ™ï¼š**
```php
public function rules(): array
{
    return [
        'title' => 'required|string|max:255',
        'author' => 'required|string|max:255',
        'isbn' => 'nullable|string|max:255|unique:books',
        'description' => 'nullable|string',
        'cover_image' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
    ];
}
```

**æˆæƒæ£€æŸ¥ï¼š**
```php
public function authorize(): bool
{
    return auth()->check(); // åªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½åˆ›å»ºå›¾ä¹¦
}
```

#### 4. UpdateBookRequest - æ›´æ–°å›¾ä¹¦éªŒè¯

**æ–‡ä»¶ä½ç½®**: `app/Http/Requests/UpdateBookRequest.php`

**éªŒè¯è§„åˆ™ï¼š**
```php
public function rules(): array
{
    $book = $this->route('book');
    return [
        'title' => 'required|string|max:255',
        'author' => 'required|string|max:255',
        'isbn' => 'nullable|string|max:255|unique:books,isbn,' . $book->id,
        'description' => 'nullable|string',
        'cover_image' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
    ];
}
```

**æˆæƒæ£€æŸ¥ï¼š**
```php
public function authorize(): bool
{
    $book = $this->route('book');
    return $book->user_id === auth()->id() || auth()->user()->isAdmin();
}
```

#### 5. StoreBorrowRequestRequest - åˆ›å»ºå€Ÿé˜…è¯·æ±‚éªŒè¯

**æ–‡ä»¶ä½ç½®**: `app/Http/Requests/StoreBorrowRequestRequest.php`

**éªŒè¯è§„åˆ™ï¼š**
```php
public function rules(): array
{
    return [
        'book_id' => [
            'required',
            'exists:books,id',
            Rule::exists('books', 'id')->where(function ($query) {
                $query->where('status', 'approved')
                      ->where('is_available', true);
            }),
        ],
        'request_message' => 'nullable|string|max:1000',
    ];
}
```

**æˆæƒæ£€æŸ¥ï¼š**
```php
public function authorize(): bool
{
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
    // ä¸èƒ½å€Ÿé˜…è‡ªå·±çš„å›¾ä¹¦
    return auth()->check() && $book->user_id !== auth()->id();
}
```

**è‡ªå®šä¹‰éªŒè¯é€»è¾‘ï¼š**
```php
public function withValidator($validator)
{
    // æ£€æŸ¥æ˜¯å¦å·²ç»æäº¤è¿‡å€Ÿé˜…è¯·æ±‚
    // é˜²æ­¢é‡å¤æäº¤
}
```

### éªŒè¯è§„åˆ™è¯¦ç»†è¯´æ˜

| å­—æ®µ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|---------|------|
| name | required\|string\|max:255 | å¿…å¡«ã€å­—ç¬¦ä¸²ã€æœ€å¤§255å­—ç¬¦ |
| email | required\|email\|unique:users | å¿…å¡«ã€é‚®ç®±æ ¼å¼ã€å”¯ä¸€ |
| password | required\|min:8\|confirmed | å¿…å¡«ã€æœ€å°8å­—ç¬¦ã€éœ€ç¡®è®¤ |
| title | required\|string\|max:255 | å¿…å¡«ã€å­—ç¬¦ä¸²ã€æœ€å¤§255å­—ç¬¦ |
| author | required\|string\|max:255 | å¿…å¡«ã€å­—ç¬¦ä¸²ã€æœ€å¤§255å­—ç¬¦ |
| isbn | nullable\|unique:books | å¯é€‰ã€å”¯ä¸€ |
| cover_image | nullable\|image\|mimes:jpeg,png,jpg,gif\|max:2048 | å¯é€‰ã€å›¾ç‰‡æ ¼å¼ã€æœ€å¤§2MB |
| book_id | required\|exists:books,id | å¿…å¡«ã€å¿…é¡»å­˜åœ¨äºbooksè¡¨ |
| request_message | nullable\|string\|max:1000 | å¯é€‰ã€å­—ç¬¦ä¸²ã€æœ€å¤§1000å­—ç¬¦ |

### éªŒè¯é”™è¯¯å¤„ç†

æ‰€æœ‰éªŒè¯é”™è¯¯éƒ½ä¼šï¼š
- è‡ªåŠ¨é‡å®šå‘å›ä¸Šä¸€é¡µ
- åœ¨è§†å›¾ä¸­æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- ä¿ç•™ç”¨æˆ·å·²è¾“å…¥çš„æ•°æ®ï¼ˆé™¤äº†å¯†ç ï¼‰
- æ˜¾ç¤ºä¸­æ–‡é”™è¯¯æç¤ºï¼ˆé€šè¿‡ Form Request çš„ messages() æ–¹æ³•ï¼‰

**è§†å›¾ä¸­çš„é”™è¯¯æ˜¾ç¤ºï¼š**
```blade
@error('field_name')
    <p class="text-red-600">{{ $message }}</p>
@enderror
```

### Form Request çš„ä¼˜åŠ¿

1. **ä»£ç ç»„ç»‡**
   - éªŒè¯è§„åˆ™é›†ä¸­ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
   - æ§åˆ¶å™¨ä»£ç æ›´ç®€æ´

2. **å¯é‡ç”¨æ€§**
   - éªŒè¯è§„åˆ™å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹é‡ç”¨
   - é¿å…é‡å¤ä»£ç 

3. **æˆæƒæ£€æŸ¥**
   - åœ¨éªŒè¯ä¹‹å‰å°±è¿›è¡Œæˆæƒæ£€æŸ¥
   - æœªæˆæƒè¯·æ±‚ä¸ä¼šè¿›å…¥æ§åˆ¶å™¨

4. **è‡ªå®šä¹‰éªŒè¯**
   - å¯ä»¥æ·»åŠ å¤æ‚çš„è‡ªå®šä¹‰éªŒè¯é€»è¾‘
   - ä½¿ç”¨ `withValidator()` æ–¹æ³•æ‰©å±•éªŒè¯

5. **é”™è¯¯æ¶ˆæ¯**
   - å¯ä»¥è‡ªå®šä¹‰æ¯ä¸ªå­—æ®µçš„é”™è¯¯æ¶ˆæ¯
   - æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

## ğŸ“ å¼€å‘é¡ºåº

### ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–

1. **æ¸…ç†é»˜è®¤æ–‡ä»¶**
   - åˆ é™¤é»˜è®¤çš„æ¬¢è¿é¡µé¢
   - åˆ é™¤ä¸éœ€è¦çš„è¿ç§»æ–‡ä»¶ï¼ˆcacheã€jobsï¼‰
   - æ¸…ç†è·¯ç”±æ–‡ä»¶
   - æ›´æ–°åŸºç¡€æ–‡ä»¶ï¼Œæ·»åŠ ä¸­æ–‡æ³¨é‡Š

2. **é…ç½®æ•°æ®åº“**
   - é…ç½® `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥
   - ç¡®ä¿ä½¿ç”¨ MySQL æ•°æ®åº“

### ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®åº“è®¾è®¡

1. **åˆ›å»ºè¿ç§»æ–‡ä»¶**
   ```bash
   php artisan make:migration create_users_table
   php artisan make:migration create_books_table
   php artisan make:migration create_borrow_requests_table
   ```

2. **è®¾è®¡è¡¨ç»“æ„**
   - users è¡¨ï¼šæ·»åŠ  role å­—æ®µ
   - books è¡¨ï¼šåŒ…å«å›¾ä¹¦ä¿¡æ¯å’Œå›¾ç‰‡å­—æ®µ
   - borrow_requests è¡¨ï¼šåŒ…å«å€Ÿé˜…è¯·æ±‚ä¿¡æ¯

3. **è¿è¡Œè¿ç§»**
   ```bash
   php artisan migrate
   ```

### ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆ›å»º

1. **åˆ›å»ºæ¨¡å‹æ–‡ä»¶**
   ```bash
   php artisan make:model Book
   php artisan make:model BorrowRequest
   ```

2. **å®šä¹‰æ¨¡å‹å…³ç³»**
   - User æ¨¡å‹ï¼šhasMany(Book), hasMany(BorrowRequest)
   - Book æ¨¡å‹ï¼šbelongsTo(User), hasMany(BorrowRequest)
   - BorrowRequest æ¨¡å‹ï¼šbelongsTo(Book), belongsTo(User)

3. **æ·»åŠ è¾…åŠ©æ–¹æ³•**
   - User::isAdmin() - æ£€æŸ¥æ˜¯å¦æ˜¯ç®¡ç†å‘˜
   - Book::isAvailable() - æ£€æŸ¥æ˜¯å¦å¯å€Ÿé˜…
   - BorrowRequest::isPending() - æ£€æŸ¥æ˜¯å¦å¾…å¤„ç†

### ç¬¬å››é˜¶æ®µï¼šForm Request ç±»åˆ›å»º

1. **åˆ›å»º Form Request ç±»**
   ```bash
   php artisan make:request RegisterRequest
   php artisan make:request LoginRequest
   php artisan make:request StoreBookRequest
   php artisan make:request UpdateBookRequest
   php artisan make:request StoreBorrowRequestRequest
   ```

2. **å®ç°éªŒè¯è§„åˆ™å’Œæˆæƒ**
   - åœ¨æ¯ä¸ª Form Request ç±»ä¸­å®šä¹‰ `rules()` æ–¹æ³•
   - å®ç° `authorize()` æ–¹æ³•è¿›è¡Œæˆæƒæ£€æŸ¥
   - æ·»åŠ  `messages()` æ–¹æ³•è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
   - ä½¿ç”¨ `withValidator()` æ·»åŠ è‡ªå®šä¹‰éªŒè¯é€»è¾‘

### ç¬¬äº”é˜¶æ®µï¼šæ§åˆ¶å™¨å¼€å‘

1. **åˆ›å»ºæ§åˆ¶å™¨**
   ```bash
   php artisan make:controller AuthController
   php artisan make:controller BookController --resource
   php artisan make:controller BorrowRequestController --resource
   php artisan make:controller AdminController
   ```

2. **å®ç°æ§åˆ¶å™¨æ–¹æ³•**
   - AuthControllerï¼šæ³¨å†Œã€ç™»å½•ã€ç™»å‡º
   - BookControllerï¼šCRUD æ“ä½œ
   - BorrowRequestControllerï¼šå€Ÿé˜…è¯·æ±‚ç®¡ç†
   - AdminControllerï¼šç®¡ç†å‘˜åŠŸèƒ½

3. **ä½¿ç”¨ Form Request**
   - åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸­ä½¿ç”¨ Form Request ç±»ä½œä¸ºå‚æ•°
   - éªŒè¯å’Œæˆæƒæ£€æŸ¥ç”± Form Request è‡ªåŠ¨å¤„ç†
   - æ§åˆ¶å™¨ä»£ç æ›´ç®€æ´ï¼Œä¸“æ³¨äºä¸šåŠ¡é€»è¾‘

### ç¬¬å…­é˜¶æ®µï¼šè·¯ç”±é…ç½®

1. **é…ç½®è·¯ç”±**
   - å…¬å¼€è·¯ç”±ï¼šå›¾ä¹¦åˆ—è¡¨ã€å›¾ä¹¦è¯¦æƒ…
   - è®¤è¯è·¯ç”±ï¼šæ³¨å†Œã€ç™»å½•
   - éœ€è¦ç™»å½•çš„è·¯ç”±ï¼šåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ç­‰æ“ä½œ
   - ç®¡ç†å‘˜è·¯ç”±ï¼šæ‰€æœ‰ç®¡ç†å‘˜åŠŸèƒ½

2. **æ³¨æ„è·¯ç”±é¡ºåº**
   - å…·ä½“è·¯ç”±åœ¨å‰ï¼ˆå¦‚ `/books/create`ï¼‰
   - å‚æ•°è·¯ç”±åœ¨åï¼ˆå¦‚ `/books/{book}`ï¼‰

### ç¬¬ä¸ƒé˜¶æ®µï¼šè§†å›¾å¼€å‘

1. **åˆ›å»ºå¸ƒå±€æ–‡ä»¶**
   - `layouts/app.blade.php` - ä¸»å¸ƒå±€
   - åŒ…å«å¯¼èˆªæ ã€æ¶ˆæ¯æç¤ºã€é¡µè„š

2. **åˆ›å»ºé¡µé¢è§†å›¾**
   - è®¤è¯é¡µé¢ï¼šç™»å½•ã€æ³¨å†Œ
   - å›¾ä¹¦é¡µé¢ï¼šåˆ—è¡¨ã€è¯¦æƒ…ã€åˆ›å»ºã€ç¼–è¾‘
   - å€Ÿé˜…è¯·æ±‚é¡µé¢ï¼šåˆ—è¡¨ã€è¯¦æƒ…ã€åˆ›å»º
   - ç®¡ç†å‘˜é¡µé¢ï¼šä»ªè¡¨æ¿ã€ç”¨æˆ·ç®¡ç†ã€å›¾ä¹¦å®¡æ ¸

3. **å®ç°å“åº”å¼è®¾è®¡**
   - ä½¿ç”¨ Tailwind CSS
   - é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

### ç¬¬å…«é˜¶æ®µï¼šæ–‡ä»¶ä¸Šä¼ 

1. **é…ç½®å­˜å‚¨**
   ```bash
   php artisan storage:link
   ```

2. **å®ç°å›¾ç‰‡ä¸Šä¼ **
   - åœ¨ BookController ä¸­å¤„ç†å›¾ç‰‡ä¸Šä¼ 
   - å­˜å‚¨åˆ° `storage/app/public/book-covers`
   - åˆ é™¤æ—§å›¾ç‰‡æ—¶æ¸…ç†æ–‡ä»¶

### ç¬¬ä¹é˜¶æ®µï¼šç§å­æ•°æ®

1. **åˆ›å»ºç§å­æ–‡ä»¶**
   ```bash
   php artisan make:seeder UserSeeder
   php artisan make:seeder BookSeeder
   ```

2. **å¡«å……åˆå§‹æ•°æ®**
   - åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
   - åˆ›å»ºç¤ºä¾‹ç”¨æˆ·
   - åˆ›å»ºç¤ºä¾‹å›¾ä¹¦

3. **è¿è¡Œç§å­**
   ```bash
   php artisan db:seed
   ```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- PHP >= 8.1
- MySQL >= 5.7
- Composer
- Node.js (å¯é€‰ï¼Œç”¨äºå‰ç«¯èµ„æº)

### 2. å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœæ˜¯ä»ä»“åº“ï¼‰
git clone <repository-url>
cd bookSharingCommunity

# 2. å®‰è£…ä¾èµ–
composer install

# 3. å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
copy .env.example .env

# 4. ç”Ÿæˆåº”ç”¨å¯†é’¥
php artisan key:generate

# 5. é…ç½®æ•°æ®åº“
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=booksharingcommunity
DB_USERNAME=root
DB_PASSWORD=

# 6. è¿è¡Œè¿ç§»
php artisan migrate

# 7. åˆ›å»ºå­˜å‚¨é“¾æ¥
php artisan storage:link

# 8. å¡«å……ç§å­æ•°æ®
php artisan db:seed

# 9. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
php artisan serve
```

### 3. è®¿é—®åº”ç”¨

- åº”ç”¨åœ°å€ï¼šhttp://localhost:8000
- ç®¡ç†å‘˜è´¦æˆ·ï¼šadmin@example.com / admin123
- æ™®é€šç”¨æˆ·ï¼šzhangsan@example.com / password123

## ğŸ“– ä½¿ç”¨è¯´æ˜

### æ™®é€šç”¨æˆ·

1. **æ³¨å†Œ/ç™»å½•**
   - è®¿é—®é¦–é¡µï¼Œç‚¹å‡»"æ³¨å†Œ"åˆ›å»ºè´¦æˆ·
   - æˆ–ä½¿ç”¨å·²æœ‰è´¦æˆ·ç™»å½•

2. **æµè§ˆå›¾ä¹¦**
   - åœ¨é¦–é¡µæŸ¥çœ‹æ‰€æœ‰å¯å€Ÿé˜…çš„å›¾ä¹¦
   - ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šå›¾ä¹¦
   - ç‚¹å‡»å›¾ä¹¦æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

3. **åˆ†äº«å›¾ä¹¦**
   - ç™»å½•åç‚¹å‡»"åˆ†äº«å›¾ä¹¦"
   - å¡«å†™å›¾ä¹¦ä¿¡æ¯å¹¶ä¸Šä¼ å°é¢
   - æäº¤åç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸

4. **ç”³è¯·å€Ÿé˜…**
   - åœ¨å›¾ä¹¦è¯¦æƒ…é¡µç‚¹å‡»"ç”³è¯·å€Ÿé˜…"
   - å¡«å†™å€Ÿé˜…ç•™è¨€ï¼ˆå¯é€‰ï¼‰
   - æäº¤åç­‰å¾…å›¾ä¹¦æ‰€æœ‰è€…å¤„ç†

5. **ç®¡ç†å€Ÿé˜…è¯·æ±‚**
   - æŸ¥çœ‹"å€Ÿé˜…è¯·æ±‚"é¡µé¢
   - å¯ä»¥æŸ¥çœ‹"æˆ‘æäº¤çš„"å’Œ"æˆ‘æ”¶åˆ°çš„"è¯·æ±‚
   - ä½œä¸ºå›¾ä¹¦æ‰€æœ‰è€…ï¼Œå¯ä»¥åŒæ„æˆ–æ‹’ç»å€Ÿé˜…è¯·æ±‚

### ç®¡ç†å‘˜

1. **ç™»å½•ç®¡ç†å‘˜è´¦æˆ·**
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•
   - è‡ªåŠ¨æ˜¾ç¤º"ç®¡ç†å‘˜"èœå•

2. **å®¡æ ¸å›¾ä¹¦**
   - è®¿é—®"ç®¡ç†å‘˜" > "å¾…å®¡æ ¸å›¾ä¹¦"
   - æŸ¥çœ‹å¾…å®¡æ ¸çš„å›¾ä¹¦
   - ç‚¹å‡»"é€šè¿‡å®¡æ ¸"æˆ–"æ‹’ç»"

3. **ç®¡ç†ç”¨æˆ·**
   - è®¿é—®"ç®¡ç†å‘˜" > "ç”¨æˆ·ç®¡ç†"
   - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
   - ä¿®æ”¹ç”¨æˆ·è§’è‰²ï¼ˆæ™®é€šç”¨æˆ·/ç®¡ç†å‘˜ï¼‰

4. **ç®¡ç†å€Ÿé˜…è¯·æ±‚**
   - è®¿é—®"ç®¡ç†å‘˜" > "å€Ÿé˜…è¯·æ±‚ç®¡ç†"
   - æŸ¥çœ‹æ‰€æœ‰å€Ÿé˜…è¯·æ±‚
   - å¯ä»¥ç­›é€‰ä¸åŒçŠ¶æ€çš„è¯·æ±‚

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### 1. å¯†ç å®‰å…¨
- ä½¿ç”¨ Laravel çš„ Hash facade è¿›è¡Œå¯†ç åŠ å¯†
- å¯†ç æœ€å°é•¿åº¦ä¸º 8 ä¸ªå­—ç¬¦
- å¯†ç åœ¨åºåˆ—åŒ–æ—¶è‡ªåŠ¨éšè—

### 2. CSRF ä¿æŠ¤
- æ‰€æœ‰è¡¨å•éƒ½åŒ…å« CSRF ä»¤ç‰Œ
- Laravel è‡ªåŠ¨éªŒè¯ CSRF ä»¤ç‰Œ

### 3. SQL æ³¨å…¥é˜²æŠ¤
- ä½¿ç”¨ Eloquent ORMï¼Œè‡ªåŠ¨é˜²æ­¢ SQL æ³¨å…¥
- ä½¿ç”¨å‚æ•°ç»‘å®šï¼Œä¸ç›´æ¥æ‹¼æ¥ SQL

### 4. XSS é˜²æŠ¤
- Blade æ¨¡æ¿è‡ªåŠ¨è½¬ä¹‰è¾“å‡º
- ä½¿ç”¨ `{!! !!}` æ—¶éœ€ç¡®ä¿å†…å®¹å®‰å…¨

### 5. æ–‡ä»¶ä¸Šä¼ å®‰å…¨
- éªŒè¯æ–‡ä»¶ç±»å‹ï¼ˆä»…å…è®¸å›¾ç‰‡ï¼‰
- é™åˆ¶æ–‡ä»¶å¤§å°ï¼ˆæœ€å¤§ 2MBï¼‰
- æ–‡ä»¶å­˜å‚¨åœ¨å®‰å…¨ç›®å½•

### 6. æƒé™æ§åˆ¶
- è·¯ç”±çº§åˆ«çš„æƒé™æ§åˆ¶ï¼ˆä¸­é—´ä»¶ï¼‰
- æ§åˆ¶å™¨çº§åˆ«çš„æƒé™æ£€æŸ¥
- è§†å›¾çº§åˆ«çš„æƒé™åˆ¤æ–­

## ğŸ“Š æ•°æ®éªŒè¯æ€»ç»“

### éªŒè¯ä½ç½®

1. **æ§åˆ¶å™¨éªŒè¯**
   - æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½é€šè¿‡ `$request->validate()` éªŒè¯
   - éªŒè¯å¤±è´¥è‡ªåŠ¨é‡å®šå‘å¹¶æ˜¾ç¤ºé”™è¯¯

2. **æ¨¡å‹éªŒè¯**
   - ä½¿ç”¨ `$fillable` é™åˆ¶å¯æ‰¹é‡èµ‹å€¼çš„å­—æ®µ
   - ä½¿ç”¨ `$hidden` éšè—æ•æ„Ÿä¿¡æ¯

3. **å‰ç«¯éªŒè¯**
   - HTML5 è¡¨å•éªŒè¯ï¼ˆrequired, minlength ç­‰ï¼‰
   - æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

### éªŒè¯è§„åˆ™ç¤ºä¾‹

| å­—æ®µ | éªŒè¯è§„åˆ™ | è¯´æ˜ |
|------|---------|------|
| email | required\|email\|unique:users | å¿…å¡«ã€é‚®ç®±æ ¼å¼ã€å”¯ä¸€ |
| password | required\|min:8\|confirmed | å¿…å¡«ã€æœ€å°8å­—ç¬¦ã€éœ€ç¡®è®¤ |
| title | required\|string\|max:255 | å¿…å¡«ã€å­—ç¬¦ä¸²ã€æœ€å¤§255å­—ç¬¦ |
| isbn | nullable\|unique:books | å¯é€‰ã€å”¯ä¸€ |
| cover_image | nullable\|image\|max:2048 | å¯é€‰ã€å›¾ç‰‡æ ¼å¼ã€æœ€å¤§2MB |

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡
- éµå¾ª Laravel çš„ MVC æ¶æ„
- ä½¿ç”¨èµ„æºæ§åˆ¶å™¨ï¼ˆResource Controllerï¼‰
- æ¨¡å‹å…³è”ä½¿ç”¨ Eloquent ORM

### 2. å®‰å…¨æ€§
- æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½è¿›è¡ŒéªŒè¯
- ä½¿ç”¨å‚æ•°ç»‘å®šé˜²æ­¢ SQL æ³¨å…¥
- æ•æ„Ÿä¿¡æ¯ä¸ç›´æ¥è¾“å‡º

### 3. ç”¨æˆ·ä½“éªŒ
- æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
- ä¿ç•™ç”¨æˆ·è¾“å…¥çš„æ•°æ®
- å“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§è®¾å¤‡

### 4. ä»£ç æ³¨é‡Š
- æ‰€æœ‰æ–¹æ³•éƒ½æœ‰ä¸­æ–‡æ³¨é‡Š
- å¤æ‚é€»è¾‘æ·»åŠ è¯´æ˜
- å‚æ•°å’Œè¿”å›å€¼éƒ½æœ‰æ–‡æ¡£

## ğŸ› å¸¸è§é—®é¢˜

### 1. è·¯ç”±404é”™è¯¯
- æ£€æŸ¥è·¯ç”±é¡ºåºï¼ˆå…·ä½“è·¯ç”±åœ¨å‰ï¼‰
- æ¸…é™¤è·¯ç”±ç¼“å­˜ï¼š`php artisan route:clear`

### 2. å›¾ç‰‡æ— æ³•æ˜¾ç¤º
- ç¡®ä¿è¿è¡Œäº† `php artisan storage:link`
- æ£€æŸ¥ `storage/app/public` ç›®å½•æƒé™

### 3. æ•°æ®åº“è¿æ¥é”™è¯¯
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
- ç¡®ä¿ MySQL æœåŠ¡æ­£åœ¨è¿è¡Œ

### 4. æƒé™é”™è¯¯
- æ£€æŸ¥ç”¨æˆ·è§’è‰²æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ä¸­é—´ä»¶é…ç½®æ­£ç¡®

## ğŸ“ å¾…å®Œå–„åŠŸèƒ½

- [ ] å›¾ä¹¦å½’è¿˜åŠŸèƒ½
- [ ] å€Ÿé˜…å†å²è®°å½•
- [ ] ç”¨æˆ·è¯„ä»·ç³»ç»Ÿ
- [ ] å›¾ä¹¦åˆ†ç±»åŠŸèƒ½
- [ ] é‚®ä»¶é€šçŸ¥åŠŸèƒ½
- [ ] å›¾ç‰‡è£å‰ªå’Œå‹ç¼©
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] API æ¥å£å¼€å‘

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

---

**å¼€å‘å®Œæˆæ—¶é—´**: 2025å¹´11æœˆ
**Laravel ç‰ˆæœ¬**: 12.39.0
**PHP ç‰ˆæœ¬**: 8.4.0
=======
# bookSharingCommunity
å›¾ä¹¦å€Ÿé˜…
>>>>>>> ded73bbd4f68f1a7677981b4ecc53d4ebcaf5d4e
